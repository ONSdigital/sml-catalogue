{%- extends "core.html" -%}
{%- set page_title = "Methods catalogue" -%}
{%- set current_path = url_for("display_methods") -%}
{% from "components/table/_macro.njk" import onsTable %}
{% from "components/status/_macro.njk" import onsStatus %}

{%- block head -%}
    <link rel="stylesheet" href="{{ url_for('static',filename='css/sml.css') }}" media="all" type="text/css">
{%- endblock head -%}

{%- block main -%}

<h1 class="ons-u-mt-no">Methods catalogue</h1>
<p>Here you will discover statistical methods used by the Office for National Statistics.</p>

{% from "components/collapsible/_macro.njk" import onsCollapsible %}
{% call onsCollapsible({
      "id": "collapsible",
      "title": "What are method themes and expert groups?"
}) %}
<p>Methods are sorted in hierarchical order with expert groups as the top level.
  For example, within an expert group are different themes, and within the themes
  are different methods.</p>

  <p>To find out more about expert groups and themes,
    please visit the <a href="https://analysisfunction.civilservice.gov.uk/government-statistical-service-and-statistician-group/gss-support/methodology/information-on-specific-methods/">analysis function website</a>.</p>
    {% endcall %}

  </br>
<h2>{{
  onsStatus({
      "label": 'Method Ready to Use',
      "type": 'success'
  })
}}</h2>
<p>The following methods are released and ready to use</p>
{% set methodsTable = {
  "id": "ready-table",
  "variants": "sortable",
  "tableClasses": "ons-u-mt-m",
  "sortBy": "Sort by",
  "ariaAsc": "ascending",
  "ariaDesc": "descending",
  "ths": [
    {
      "value": "Name"
    },
    {
      "value": "Theme"
    },
    {
      "value": "Expert group"
    },
    {
      "value": "Languages"
    },
    {
      "value": "Access"
    },
  ]
} %}
{% set methodsTableRows = [] %}
{% for row in page.rows %}
  {% do methodsTableRows.append({
    "tds": [
      {
          "value": '<a href="' + url_for("display_method_summary", method=row.id, methodState="ready-to-use-methods") + '">' + row.title + '</a>'
      },
      {"value": row.theme},
      {"value": row.exp_group},
      {"value": row.language},
      {"value": row.access},
    ]
  }) %}
{% endfor %}
{% do methodsTable.update({"trs": methodsTableRows}) %}
{{
  onsTable(methodsTable)
}}

<h2>{{
  onsStatus({
      "label": 'Future Methods',
      "type": 'pending'
  })
}}</h2>
<p>The following methods have been approved for development and will be included in future releases. Unlike Methods Ready to Use, Future Methods' code is not yet tested or approved for use. Access and Usage is at the user's own risk.</p>
{% set futureMethodsTable = {
  "id": "future-table",
  "variants": "sortable",
  "tableClasses": "ons-u-mt-m",
  "sortBy": "Sort by",
  "ariaAsc": "ascending",
  "ariaDesc": "descending",
  "ths": [
    {
      "value": "Name."
    },
    {
      "value": "Theme."
    },
    {
      "value": "Expert group."
    },
    {
      "value": "Languages."
    },
    {
      "value": "Access."
    },
  ]
} %}
{% set futureMethodsTableRows = [] %}
{% for row in page.future_rows %}
  {% do futureMethodsTableRows.append({
    "tds": [
      {
          "value": '<a href="' + url_for("display_method_summary", method=row.id, methodState="future-methods") + '">' + row.title + '</a>'
      },
      {"value": row.theme},
      {"value": row.exp_group},
      {"value": row.language},
      {"value": row.access},
    ]
  }) %}
{% endfor %}
{% do futureMethodsTable.update({"trs": futureMethodsTableRows}) %}
{{
  onsTable(futureMethodsTable)
}}
<p>The Statistical Methods Library will grow as more statistical methods are requested.</p>
{% endblock main -%}

{%- block scripts -%}
    <script type=text/javascript src="{{ url_for('static',filename='js/sml.js') }}"></script>
{%- endblock scripts -%}
