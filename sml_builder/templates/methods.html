{%- extends "core.html" -%}
{%- set page_title = "Methods catalogue" -%}
{%- set current_path = url_for("display_methods") -%}
{%- block main -%}

<h1 class="ons-u-mt-no">{{ content["heading1"] }}</h1>
<p>{{ content["paragraph"] }}</p>

{% from "components/panel/_macro.njk" import onsPanel %}

{% call onsPanel({}) %}
  {{ content["panel"] | markdown}}
{% endcall %}

<h2 class="ons-u-mt-m">{{ content["heading2"] }}</h2>

{% from "components/collapsible/_macro.njk" import onsCollapsible %}
{% call onsCollapsible({
      "id": "collapsible",
      "title": content["detail"]
}) %}
<p>{{ content["detail_content"] | markdown}}</p>
<p>To find out more about expert groups and themes, 
  please visit the <a href=" {{ url_for('display_glossary') }} ">library glossary</a>.</p>
{% endcall %}

{% from "components/table/_macro.njk" import onsTable %}
{% set methodsTable = {
  "variants": 'sortable',
  "tableClasses": "ons-u-mt-m",
  "sortBy": "Sort by",
  "ariaAsc": "ascending",
  "ariaDesc": "descending",
  "ths": [
    {
      "value": "Name"
    },
    {
      "value": "Theme"
    },
    {
      "value": "Expert group"
    },
    {
      "value": "Languages"
    },
    {
      "value": "Access"
    },
    {
      "value": "Status"
    },
  ]
} %}
{% set methodsTableRows = [] %}
{% for method in methods %}
  {% do methodsTableRows.append({
    "tds": [
      {
          "value": '<a href="' + url_for("display_method", method=method["id"]) + '">' + method.name + '</a>'
      },
      {"value": method.theme},
      {"value": method.expert_group},
      {"value": method.language},
      {"value": method.access},
      {"value": '<span class="ons-status ons-status--' + status_class.get(method.status, "info") + '">' + method.status + '</span>'},
    ]
  }) %}
{% endfor %}
{% do methodsTable.update({"trs": methodsTableRows}) %}
{{
  onsTable(methodsTable)
}}
<p>The Statistical Methods Library will grow as more statistical methods are requested.</p>
{% endblock main -%}
