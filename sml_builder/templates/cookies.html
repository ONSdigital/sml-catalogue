{%- extends "core.html" -%}
{%- set mainCols=8 -%}
{%- from "components/radios/_macro.njk" import onsRadios -%}
{%- from "components/button/_macro.njk" import onsButton -%}
{%- from "components/panel/_macro.njk" import onsPanel -%}
{%- from "components/details/_macro.njk" import onsDetails -%}
{%- from "components/table/_macro.njk" import onsTable -%}
{%- from "components/list/_macro.njk" import onsList -%}

{%- block main -%}
    <div class="ons-page__body">
        <h1 class="ons-u-fs-xxl">Cookies on the statistical methods library</h1>
        {% call onsPanel({
            "classes": "ons-u-mb-m ons-u-d-no ons-cookies-confirmation-message",
            "type": "success",
            "iconType": "check",
            "iconSize": "xl"
        }) %}
            <h2 id="cookie-change-alert">Your cookie settings have been saved</h2>
            <p class="ons-u-mb-no">Some parts of the ONS may use additional cookies and will have their own cookie policy and banner.</p>
            <a class="{% if not isDesignSystemExample %}ons-js-return-link {% endif %}ons-u-mt-s ons-u-dib" href="#0">Return to previous page</a>
        {% endcall %}

        <p>Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>
        <p>We use cookies to store information about how you use the ONS website, such as the pages you visit.</p>
        <h2>Cookie settings</h2>
        <div class="ons-u-db-no-js_enabled">
            <p>We use JavaScript to set our cookies. Javascript is not running on your browser so you cannot change your settings.</p>
            <p>You can try:</p>
            <ul>
                <li>turning on JavaScript in your browser</li>
                <li>reloading the page in case there was a temporary fault with JavaScript</li>
            </ul>
        </div>
        <div class="ons-u-db-no-js_disabled">
            <p>We use three types of cookie. You can choose which cookies you're happy for us to use.</p>

            <form data-module="cookie-settings">
                <h3>Cookies that measure website use</h3>
                <p>We use Google Analytics to measure how you use the website so we can improve it based on user needs. Google Analytics sets cookies that store anonymised information about:</p>
                <ul>
                    <li>how you got to the site</li>
                    <li>the pages you visit on ons.gov.uk and how long you spend on each page</li>
                    <li>what you click on while you're visiting the site</li>
                </ul>
                {% call onsDetails({
                    "id": "cookies-measure-website-use-details",
                    "classes": "ons-u-mb-s",
                    "title": "Learn more about these Google Analytics cookies",
                    "titleTag": 'h4',
                    "button": {
                        "close": "Hide this"
                    }
                }) %}
                    {{
                        onsTable({
                            "ths": [
                                {
                                    "value": "Name"
                                },
                                {
                                    "value": "Purpose"
                                },
                                {
                                    "value": "Expires"
                                }
                            ],
                            "trs": [
                                {
                                    "tds": [
                                        {
                                            "value": "<code>_ga</code>"
                                        },
                                        {
                                            "value": 'This helps us count how many people visit ons.gov.uk by tracking if you’ve visited before'
                                        },
                                        {
                                            "value": "2 years"
                                        }
                                    ]
                                },
                                {
                                    "tds": [
                                        {
                                            "value": "<code>_gid</code>"
                                        },
                                        {
                                            "value": 'This helps us count how many people visit ons.gov.uk by tracking if you’ve visited before'
                                        },
                                        {
                                            "value": "24 hours"
                                        }
                                    ]
                                },
                                {
                                    "tds": [
                                        {
                                            "value": "<code>_gat</code>"
                                        },
                                        {
                                            "value": 'Used to manage the rate at which page view requests are made'
                                        },
                                        {
                                            "value": "10 minutes"
                                        }
                                    ]
                                }
                            ]
                        })
                    }}
                {% endcall %}
                <p>We do not allow Google to use or share the data about how you use this site.</p>
                <div class="ons-u-mb-s">
                    {{ onsRadios({
                        "id": "cookies-measure-website-use",
                        "name": "cookies-usage",
                        "legend": "Do you want to allow usage tracking?",
                        "legendClasses": "ons-u-vh",
                        "radios": [
                            {
                                "id": "on-measure-website-use",
                                "label": {
                                    "text": "On"
                                },
                                "value": "on"
                            },
                            {
                                "id": "off-measure-website-use",
                                "label": {
                                    "text": "Off"
                                },
                                "value": "off"
                            }
                        ]
                    }) }}
                </div>
                <p>This selection will expire after two years.</p>

                <h3>Strictly necessary cookies</h3>
                <p>These essential cookies do things like:</p>
                <ul>
                    <li>remember the notifications you've seen so we do not show them to you again</li>
                    <li>remember your progress through a form (for example, an ons study)</li>
                </ul>
                <p>They always need to be on.</p>
                {% call onsDetails({
                    "id": "cookies-essential-details",
                    "classes": "ons-u-mb-l",
                    "title": "Learn more about these essential cookies",
                    "titleTag": 'h4',
                    "button": {
                        "close": "Hide this"
                    }
                }) %}
                    <h5 class="ons-u-fs-r--b">Cookie message</h5>
                    <p>You may see a banner when you visit ons.gov.uk inviting you to accept cookies or review your settings. We’ll set cookies so that your computer knows you’ve seen it and not to show it again, and also to store your settings.</p>
                    {{
                        onsTable({
                            "ths": [
                                {
                                    "value": "Name"
                                },
                                {
                                    "value": "Purpose"
                                },
                                {
                                    "value": "Expires"
                                }
                            ],
                            "trs": [
                                {
                                    "tds": [
                                        {
                                            "value": "<code>ons_cookie_message_displayed</code>"
                                        },
                                        {
                                            "value": 'Lets us know that you’ve seen our cookie message'
                                        },
                                        {
                                            "value": "1 year"
                                        }
                                    ]
                                },
                                {
                                    "tds": [
                                        {
                                            "value": "<code>ons_cookie_policy</code>"
                                        },
                                        {
                                            "value": 'Saves your cookie consent settings'
                                        },
                                        {
                                            "value": "1 year"
                                        }
                                    ]
                                }
                            ]
                        })
                    }}
                {% endcall %}
                {{
                    onsButton({
                        "id": 'ons_cookie_save_changes',
                        "type": 'submit',
                        "text": 'Save changes'
                    })
                }}

            </form>
        </div>
    </div>
{% endblock %}

  {% block scripts %}

    <script type=text/javascript src="{{ url_for('static',filename='js/cookies_function.js') }}"></script>

    <style>
      body {
        height: auto;
      }
    </style>

  {% endblock %}