name: deploy
on: 
  pull_request:
    branches:
      - main
permissions:
  id-token: write
  contents: read    # This is required for actions/checkout
jobs:
  Test-creds:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - run: echo "The ${{ github.repository }} repository has been cloned to the runner."
      - name: Configure AWS credentials from Test account
        uses: aws-actions/configure-aws-credentials@v1
        with:
          role-to-assume: arn:aws:iam::115311790871:role/sml-deploy
          aws-region: eu-west-2
      - name: Install dependencies
        run: |
          aws s3api list-buckets
          export AWS_DEFAULT_REGION=eu-west-2
          export PAGER=cat
          aws lambda list-functions
    